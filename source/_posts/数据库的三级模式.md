---
title: 数据库的三级模式
date: 2016-09-18 09:56:55
tags: '数据库'
---

![数据库的三级模式](https://ws4.sinaimg.cn/large/647dc635jw1f7xib5ymy8j20vd0fan3x.jpg)
<!-- more -->

**这张图表示数据库管理系统(DBMS)从三个层次来管理数据： **

- 外部层次（External Level）
- 概念层次（Conceptual Level）
- 内部层次（Internal Level）

** 首先来了解一下这三个层次分别是什么？ **

- `外部层次`的数据是用户所看到的数据，所以又叫`用户层次`；
- `概念层次`的数据是`DBMS`中全局管理（可以简单地理解为所有的）数据，及数据之间的约束，所以又叫`逻辑层次`；
- `内部层次`的数据是存储在介质上的数据，包括存储路径、存储方式、索引方式等，所以又叫`物理层次`。

** 模式和层次的关系 **

**模式是什么？**

> 模式就是数据库全体数据的逻辑结构和特征的描述，是所有用户的公共视图。

对于不同层次的数据，对应着不同层次的模式，分别是：
- 外模式（用户模式）
- 模式（概念模式/逻辑模式）
- 内模式（物理模式）

** 三级模式 **
在一个数据库系统中，`模式`与`内模式`都只能有一个，但`外模式`可以有很多个。

原因是`模式`是对`DBMS`中所有数据的全局性的结构描述，所以只能有一种形式。

> 举个例子：一个学校的数据库中要存放所有学生、课程与选课记录的信息。我们可以用三张表：学生信息表、课程信息表与选课记录表来存放所有的数据。但是存放学生的数据的时候，我们只能够选取某一种特定的结构对学生的信息进行描述，而不能多种不同的结构共存（比如两张不同结构的学生表，存放的都是所有学生的信息）。所以`模式`只能有一个。
>  
>  同样，我们在`介质`上存放数据的时候，也只能选取某一种特定的存储路径（数据文件在哪个文件夹下）、存储方式（二进制/文本）、索引方式（聚簇索引，普通索引）等等，可以理解为一种数据结构，和具体的计算机语言没什么关系，也不能够像程序一样执行。

至于`外模式`，是以`视图`的形式展现给用户的。

** 视图又是什么？ **

这里的`视图`不是我们平时说的 UI ，而是指数据库中的视图，又叫`虚表`，是相对于`基本表`来说的。

这里的`基本表`指的就是我们在建立数据库的时候需要创建的那些数据表（用 CREATE TABLE 创建出来的）。

而视图，是对这些基本表中的数据的某种展现形式，是这些数据的一个子集，但不限于某张表中的数据的子集，也可以是多张表联合起来进行显示的一组数据。
> 比如在一个学校的教务系统中，我们希望每个学生只能够看到自己的成绩，普通老师可以看到他/她教的学生的成绩，系主任可以看到这个系中所有学生的成绩，校长可以看到学校中每个学生的成绩。那么我们可以基于所有学生的成绩数据，针对于不同权限的用户选取不同的子集，这个子集就是所谓的`视图`。

但需要注意的是，`视图`本身并不`实际`存放数据，而只是对于如何选取数据的一种描述，这也是所谓的`虚`。

当全局数据改变的时候，视图中的数据也会随之改变。通过外模式，可以让不同的用户（包括应用程序）看到他们希望看到的（比如可以同时看到学生本人的信息及他/她的所有成绩与对应的课程的信息，而这些数据实际上是分别存在于不同的数据表中的），或是我们希望他们看到的数据（通过不同的子集来实现）。

**总而言之，三种层次的模式都是对于数据的描述，只不过描述的层次不同。**
